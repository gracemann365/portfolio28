<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }
          
          .gallery-track {
            position: fixed;
            display: grid;
            grid-template-columns: repeat(3,1fr);
            gap: 0.25rem;
            padding: 0.25rem;
            will-change: transform;
          }
          
          .card {
            height: 400px;
            overflow: hidden;
          
            & .card-image-wrapper {
              height: 135%;
              will-change: transform;
          
              & img {
                width: 100%;
                height: 100%;
                object-fit: cover;
              }
            }
          } 
          
          @media (width < 800px) {
            .gallery-track {
              grid-template-columns: repeat(2,1fr);
            }
          }
          
          @media (width < 550px) {
            .gallery-track {
              grid-template-columns: repeat(1,1fr);
            }
          }
    </style>
</head>
<body>
    <main class='gallery'>
        <div class='gallery-track'>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1696258686454-60082b2c33e2?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1488229297570-58520851e868?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1568952433726-3896e3881c65?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://plus.unsplash.com/premium_photo-1661727547850-3d7c020a64a8?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1573164713988-8665fc963095?q=80&w=2069&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1592085974642-7e1d8f7d31a5?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://plus.unsplash.com/premium_photo-1680402879257-48ffbbc6db1d?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1593376893114-1aed528d80cf?q=80&w=1915&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.unsplash.com/photo-1504328345606-18bbc8c9d7d1?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/3861969/pexels-photo-3861969.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/2007647/pexels-photo-2007647.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/919734/pexels-photo-919734.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/256381/pexels-photo-256381.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/3912992/pexels-photo-3912992.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://images.pexels.com/photos/6636477/pexels-photo-6636477.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/ua2vQnsn_x0'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/TGOGwgPR1_Q'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/oqStl2L5oxI'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/XazoYQRnDZo'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/YfgE8WCcZsQ'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/NpMWgJ1_Ohk'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/SU35VU5de1o'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/TbUL8w1C-0s'>
            </div>
          </div>
          <div class='card'>
            <div class='card-image-wrapper'>
              <img src='https://source.unsplash.com/bOvvgayPCyI'>
            </div>
          </div>
        </div>
      </main>
    
</body>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
      <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

      <script>
        const gallery = document.querySelector('.gallery');
const track = document.querySelector('.gallery-track');
const cards = document.querySelectorAll('.card');
const easing = 0.05;
let startY = 0;
let endY = 0;
let raf;

const lerp = (start,end,t) => start * (1-t) + end * t;

function updateScroll() {
  startY = lerp(startY,endY,easing);
  gallery.style.height = `${track.clientHeight}px`;
  track.style.transform = `translateY(-${startY}px)`;
  activateParallax();
  raf = requestAnimationFrame(updateScroll);
  if (startY.toFixed(1) === window.scrollY.toFixed(1)) cancelAnimationFrame(raf);
}

function startScroll() {
  endY = window.scrollY; 
  cancelAnimationFrame(raf);
  raf = requestAnimationFrame(updateScroll);
}

function parallax(card) {
  const wrapper = card.querySelector('.card-image-wrapper');
  const diff = card.offsetHeight - wrapper.offsetHeight;
  const {top} = card.getBoundingClientRect();
  const progress = top / window.innerHeight;
  const yPos = diff * progress;
  wrapper.style.transform = `translateY(${yPos}px)`;
}

const activateParallax = () => cards.forEach(parallax);

function init() {
  activateParallax();
  startScroll();
}

window.addEventListener('load',updateScroll,false);
window.addEventListener('scroll',init,false);
window.addEventListener('resize',updateScroll,false);
      </script>
</html>